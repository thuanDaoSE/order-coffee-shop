server {
    # Nginx sẽ lắng nghe ở port 80 (cổng HTTP mặc định)
    listen 80;

    # Cấu hình cho tất cả các request đến
    location / {
        # Dòng quan trọng nhất:
        # Chuyển tiếp tất cả request đến service tên là 'spring-app' ở port 8080.
        # 'spring-app' là tên service chúng ta sẽ định nghĩa trong docker-compose.
        proxy_pass http://spring-app:8080;

        # Các header cần thiết để ứng dụng backend nhận đúng thông tin request
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}